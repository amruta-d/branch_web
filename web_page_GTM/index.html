<html>
  <head>
    <!-- Google Tag Manager-->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                })(window,document,'script','dataLayer','GTM-T56RJKJ');</script>
    <!--End Google Tag Manager -->
    
    
  
  </head>
  <body>
    <!-- Google Tag Manager (noscript)-->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T56RJKJ"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!--End Google Tag Manager (noscript) -->
    <p>Sms Test</p>
    
    <section>
      <fieldset>
        <legend><h3>SMS</h3></legend>
        <input type='text' placeholder='phone number' id='phone'>
        <button type='button' id='sms'>Text Me The Link</button>
      </fieldset>
    </section>
    
     <!-- branch -->
    <script type='text/javascript'>
      // cache DOM
      document.getElementById('sms').addEventListener('click', linkSms);
      var phoneNumber = document.getElementById('phone');
      (function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s<_.length;)c(h,_[s++]);d=r.createElement(a);d.async=1;d.src="https://cdn.branch.io/branch-latest.min.js";k=r.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]=h}})(window,document,"script","branch",function(b,r){b[r]=function(){b._q.push([r,arguments])}},{_q:[],_v:1},"addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode trackCommerceEvent".split(" "), 0);
      branch.init('key_live_khiGBUiIuF5o7NKxHi9ICfobttptuegW');
      
      function linkSms() {
        var phone = phoneNumber.value.replace(/\D/g,'') || 'blank';
        var linkOptions = { 
          make_new_link: true
        };
        var linkData = {
          tags: [ 'tag1', 'tag2' ],
          channel: 'facebook',
          feature: 'dashboard',
          stage: 'new user',
          alias: '',
          data: {
            'custom_bool': true,
            'custom_int': 123,
            'custom_string': 'hello',
            '$og_title': 'Bubble',
            '$og_description': 'Find a Babysitter Trusted by Your Friends.',
            '$og_image_url': 'http://joinbubble.com/wp-content/uploads/2016/02/cropped-ic_launcher_APP.png'
          }
        };
        
        branch.sendSMS(phone, linkData, linkOptions, function(err, link) { 
          console.log(err); 
        });
      
      }
    
    </script>
  </body>
</html>
